<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>General IO &mdash; Principia Materia  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../contents.html" class="icon icon-home"> Principia Materia
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Welcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentations/contents.html">Documentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ci.html">Continuous Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api_doc/modules.html">API Documentations</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../contents.html">Principia Materia</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../contents.html" class="icon icon-home"></a> &raquo;</li>
      <li>General IO</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/old_notebooks/io_interface/general_io.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="General-IO">
<h1>General IO<a class="headerlink" href="#General-IO" title="Permalink to this headline"></a></h1>
<section id="Array-Parsing">
<h2>Array Parsing<a class="headerlink" href="#Array-Parsing" title="Permalink to this headline"></a></h2>
<p>Throughout the entire package, array of numbers are very frequently used within the code as well as the inputs parameters to the methods. Thus, it is of great benefit to have a generic array parser to convert array into desired format, as well as enforcing array format for certain vairables.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>from principia_materia import Fraction
from principia_materia.io_interface import parse_array
</pre></div>
</div>
</div>
<ul class="simple">
<li><p>We updated the methods of the built-in Fraction class, due to incompatibilities with numpy in python3.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">parse_array</span></code> method provides an easy way to creating an array, as demonstrated below. Supported delimiters for string format include space, comma, semicolon and newline, with hierarchy from low to high.</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>parse_array(&quot;&quot;&quot;\
    r3/2 0.5 0.5
    -1/2 0.0 0.5
     3/4 0.5 0.0&quot;&quot;&quot;, dtype=float)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[0.8660254037844386, 0.5, 0.5], [-0.5, 0.0, 0.5], [0.75, 0.5, 0.0]]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>parse_array(&quot;&quot;&quot;\
     3/2 0.5 0.5
    -1/2 0.0 0.5
     3/4 0.5 0.0&quot;&quot;&quot;, dtype=Fraction)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[Fraction(3, 2), Fraction(1, 2), Fraction(1, 2)],
 [Fraction(-1, 2), Fraction(0, 1), Fraction(1, 2)],
 [Fraction(3, 4), Fraction(1, 2), Fraction(0, 1)]]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>parse_array(&quot;&quot;&quot;\
     3/2
    -1/2 0.0
     3/4 0.5 0.0&quot;&quot;&quot;, dtype=Fraction, pad_to_shape=(3, 3), fillvalue=1)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([[Fraction(3, 2), Fraction(1, 1), Fraction(1, 1)],
       [Fraction(-1, 2), Fraction(0, 1), Fraction(1, 1)],
       [Fraction(3, 4), Fraction(1, 2), Fraction(0, 1)]], dtype=object)
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>from principia_materia.translation_group import (
    get_structure,
    save_structure,
    Cluster,
    Crystal,
    CrystalFTG,
)
</pre></div>
</div>
</div>
</section>
<section id="Structure-file">
<h2>Structure file<a class="headerlink" href="#Structure-file" title="Permalink to this headline"></a></h2>
<p>For all translation group related classes, including Lattice, Cluster, Crystal, CrystalFTG, LatticeFTG and Kpoints, we present a method <code class="docutils literal notranslate"><span class="pre">get_structure</span></code> to construct an instance from a YAML format file. The file needs to contain all the required keywords present for the desired class and the values need to be in supported format.</p>
<p>In case of arrays, the method can take either a YAML supported nested list or in a string of numbers with space and newline of comma and semicolon delimiters.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">vec</span></code>: lattice vectors, 2D array of float.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">atoms</span></code>: a list of single item dictionaries with the atom name as key and atom positions as the value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">orbitals</span></code>: orbitals used in the structure, string, or a list of strings.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">supa</span></code>: supercell matrix, 2D array of int.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pg</span></code>: name of the point group, string</p></li>
</ul>
<p>This file format is easy to write by hand, thus can serve as an easy way to document a strcuture in study. It is also used across the package to store structural information when needed. It can be easily converted into structure input files for different DFT engines on demand.</p>
<p>For example, if we have the follwing YAML string for a CrystalFTG class, we can pass it into the <code class="docutils literal notranslate"><span class="pre">get_structure</span></code> method, specifying the structure type with <code class="docutils literal notranslate"><span class="pre">stype=CrystalFTG</span></code>, we will get a instance of the CrystalFTG class of rocksalt.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>structure_crystalftg = &quot;&quot;&quot;\
vec: |
    0.0 0.5 0.5
    0.5 0.0 0.5
    0.5 0.5 0.0
atoms:
    - Na:
        0.0 0.0 0.0
    - Cl:
        0.5 0.5 0.5
orbitals: p
supa: |
    1 0 0
    0 1 0
    0 0 1
&quot;&quot;&quot;
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>struct = get_structure(structure_crystalftg, stype=CrystalFTG)
struct.to_dict()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
OrderedDict([(&#39;vec&#39;,
              array([[0. , 0.5, 0.5],
                     [0.5, 0. , 0.5],
                     [0.5, 0.5, 0. ]])),
             (&#39;atoms&#39;,
              OrderedDict([(&#39;Na&#39;, array([[0., 0., 0.]])),
                           (&#39;Cl&#39;, array([[0.5, 0.5, 0.5]]))])),
             (&#39;orbitals&#39;, &#39;p&#39;),
             (&#39;supa&#39;,
              array([[1, 0, 0],
                     [0, 1, 0],
                     [0, 0, 1]]))])
</pre></div></div>
</div>
<p>The same can be achieved by passing in the path to a YAML file, here we have this <strong>structure_crystalftg.yml</strong> file:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>cat structure_crystalftg.yml
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
vec: |
    0.0,0.5,0.5
    0.5,0.0,0.5
    0.5,0.5,0.0
atoms:
    - Na:
        0.0 0.0 0.0
    - Cl:
        0.5 0.5 0.5
orbitals: p
supa: |
    1 0 0
    0 1 0
    0 0 1

</pre></div></div>
</div>
<p>We can construct an instance with the same information:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>struct = get_structure(&quot;structure_crystalftg.yml&quot;, stype=CrystalFTG)
struct.to_dict()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
OrderedDict([(&#39;vec&#39;,
              array([[0. , 0.5, 0.5],
                     [0.5, 0. , 0.5],
                     [0.5, 0.5, 0. ]])),
             (&#39;atoms&#39;,
              OrderedDict([(&#39;Na&#39;, array([[0., 0., 0.]])),
                           (&#39;Cl&#39;, array([[0.5, 0.5, 0.5]]))])),
             (&#39;orbitals&#39;, &#39;p&#39;),
             (&#39;supa&#39;,
              array([[1, 0, 0],
                     [0, 1, 0],
                     [0, 0, 1]]))])
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>struct = get_structure(&quot;&quot;&quot;\
vec: |
    r3/2  1/2  0
    r3/2 -1/2  0
    0          0   15
atoms:
    - C: |
        0.0 0.0 0.0
        2/3 2/3 0
orbitals: p
supa: |
    1 0 0
    0 1 0
    0 0 1
&quot;&quot;&quot;, stype=CrystalFTG)
struct.to_dict()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
OrderedDict([(&#39;vec&#39;,
              array([[ 0.8660254,  0.5      ,  0.       ],
                     [ 0.8660254, -0.5      ,  0.       ],
                     [ 0.       ,  0.       , 15.       ]])),
             (&#39;atoms&#39;,
              OrderedDict([(&#39;C&#39;,
                            array([[0.        , 0.        , 0.        ],
                                   [0.66666667, 0.66666667, 0.        ]]))])),
             (&#39;orbitals&#39;, &#39;p&#39;),
             (&#39;supa&#39;,
              array([[1, 0, 0],
                     [0, 1, 0],
                     [0, 0, 1]]))])
</pre></div></div>
</div>
<p>A structure instance can also be easily saved into the file format:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>print(save_structure(struct))
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
# CrystalFTG
vec:
  [[ 0.86602540,  0.50000000,  0.00000000],
   [ 0.86602540, -0.50000000,  0.00000000],
   [ 0.00000000,  0.00000000,  15.00000000]]
atoms:
  - C:
      [[ 0.00000000,  0.00000000,  0.00000000],
       [ 0.66666667,  0.66666667,  0.00000000]]
orbitals: p
supa:
  [[ 1,  0,  0],
   [ 0,  1,  0],
   [ 0,  0,  1]]
</pre></div></div>
</div>
</section>
<section id="Format-arrays">
<h2>Format arrays<a class="headerlink" href="#Format-arrays" title="Permalink to this headline"></a></h2>
<p>Since we are dealing with a lot of arrays, sometime we want to print them out to save into a file, or even just for inspection. The <code class="docutils literal notranslate"><span class="pre">ArrayFormatter</span></code> class enables us to format 2D arrays into various ways.</p>
<p><code class="docutils literal notranslate"><span class="pre">ArrayFormatter</span></code> is a class that behaves like a function. Once instantiated, the object can be called just like a function. This allows us to reused all of the formatting code and achieve various styles of formats in minimum amount of code.</p>
<p>We can instantiate the class with configurations to format arrays in desired style, then use it to format the arrays we have. Meanwhile, many frequently used styles are pre-configured and ready to use.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>from principia_materia.io_interface import (
    ArrayFormatter,
    format_array_bracket,
    format_array_table,
    tex_array_formatter,
)
</pre></div>
</div>
</div>
<p>See class docstring for usage details:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>help(ArrayFormatter)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on class ArrayFormatter in module principia_materia.io_interface.array_io:

class ArrayFormatter(builtins.object)
 |  ArrayFormatter(prec=8, fmt=None, align=&#39;l&#39;, cell_length=1, delimiter=&#39; &#39;, pad=0, newline=&#39;\n&#39;, header=&#39;&#39;, footer=&#39;&#39;, line_begin=&#39;&#39;, line_end=&#39;&#39;, indent=0)
 |
 |  Format 2D array.
 |
 |  Object oriented class for formatting arrays.
 |  The mechanism is to setup the desired style of the formatter, with which
 |  one can format arrays, just like any formatter function.
 |  Some default styles will be provided below, for convenience.
 |
 |  This class implements all the basic features of a formatter, so that any
 |  new styles can be achieved with minimum work by simply providing style
 |  specifications.
 |
 |  Parameters
 |  ----------
 |  prec        : int, optional, default to 8
 |      Decimal points to keep for floating points.
 |      Can be directly set in `fmt`.
 |  fmt         : str, optional, default to None
 |      The string format for each array element.
 |      Default dynamically using `prec`, `align`, `cell_length` and the cell
 |      data type to determine the decimal points.
 |      Once the format is set to not None, it will be used for the cell format,
 |      align and cell_length will be ignored.
 |  align       : str, optional, default to &#34;l&#34;, choices(&#34;l&#34;, &#34;r&#34;, &#34;c&#34;)
 |      The alignment of the cell, can choose between left, right and centered.
 |  cell_length : int, optional, default to 0
 |      The length of the cell, this is used to align the cell, if the provided
 |      `cell_length` is too short, it will be ignored.
 |  delimiter   : str, optional, default to &#34; &#34;
 |      The separator of each array element in the same row.
 |  pad         : int or str, optional, default to 0
 |      (Takes in int for number of spaces, or str for more customized padding)
 |      The amount of space between element, this will pad between array
 |      elements and `line_begin`/`line_end`, as well as after delimiter
 |      and the next array element. If padding in either place is needed,
 |      add the padding to delimeter or `line_begin`/`line_end`.
 |  newline     : str, optional, default to &#34;\\n&#34;
 |      The separator between each row.
 |  header      : str, optional, default empty
 |      String that will appear immediately in front of the array.
 |  footer      : str, optional, default empty
 |      String that will appear immediately after the array.
 |  line_begin  : str, optional, default empty
 |      String that will appear immediately in front of each row of the array.
 |  line_end    : str, optional, default empty
 |      String that will appear immediately after each row of the array.
 |  indent      : int or str, optional, default to 0
 |      (Takes in int for number of spaces, or str for more customized indent)
 |      Overall indent of the array, does not affect header and footer.
 |      For indent on the entire string, use `textwrap.indent`.
 |
 |
 |  Examples
 |  --------
 |  &gt;&gt;&gt; format_array_nparray = ArrayFormatter(
 |  ...     prec=8,
 |  ...     delimiter=&#34;, &#34;,
 |  ...     line_begin=ArrayFormatter.firstline_line_begin(line_begin=&#34;       [&#34;, first_line_begin=&#34;array([[&#34;),
 |  ...     line_end=ArrayFormatter.lastline_line_end(line_end=&#34;],&#34;, last_line_end=&#34;]])&#34;),
 |  ...     )
 |  &gt;&gt;&gt; print(format_array_nparray(np.identity(3)))
 |  array([[ 1.00000000,  0.00000000,  0.00000000],
 |         [ 0.00000000,  1.00000000,  0.00000000],
 |         [ 0.00000000,  0.00000000,  1.00000000]])
 |  &gt;&gt;&gt; formatter = tex_array_formatter(texenv=&#34;bmatrix&#34;)
 |  &gt;&gt;&gt; print(formatter(np.identity(3)))
 |  \begin{bmatrix}
 |     1.00000000 &amp;&amp;  0.00000000 &amp;&amp;  0.00000000 \\
 |     0.00000000 &amp;&amp;  1.00000000 &amp;&amp;  0.00000000 \\
 |     0.00000000 &amp;&amp;  0.00000000 &amp;&amp;  1.00000000 \\
 |  \end{bmatrix}
 |
 |  Methods defined here:
 |
 |  __call__(self, arr, prec=None, cell_length=None, extent_dimention=False)
 |      Call self as a function.
 |
 |  __init__(self, prec=8, fmt=None, align=&#39;l&#39;, cell_length=1, delimiter=&#39; &#39;, pad=0, newline=&#39;\n&#39;, header=&#39;&#39;, footer=&#39;&#39;, line_begin=&#39;&#39;, line_end=&#39;&#39;, indent=0)
 |      Initialize self.  See help(type(self)) for accurate signature.
 |
 |  format_array(self, arr, prec=None, cell_length=None, extent_dimention=False)
 |
 |  ----------------------------------------------------------------------
 |  Static methods defined here:
 |
 |  firstline_line_begin(line_begin, first_line_begin)
 |
 |  lastline_line_end(line_end, last_line_end)
 |
 |  ----------------------------------------------------------------------
 |  Data descriptors defined here:
 |
 |  __dict__
 |      dictionary for instance variables (if defined)
 |
 |  __weakref__
 |      list of weak references to the object (if defined)

</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>array = np.array([
    [0.0, 0.5, 0.5],
    [0.5, 0.0, 0.5],
    [0.5, 0.5, 0.0],
])
fraction_array = np.array([
    [Fraction(0, 1), Fraction(1, 2), Fraction(1, 2)],
    [Fraction(1, 2), Fraction(0, 1), Fraction(1, 2)],
    [Fraction(1, 2), Fraction(1, 2), Fraction(0, 1)],
])
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>print(format_array_bracket(array))
print(format_array_bracket(fraction_array))
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[ 0.00000000,  0.50000000,  0.50000000],
 [ 0.50000000,  0.00000000,  0.50000000],
 [ 0.50000000,  0.50000000,  0.00000000]]
[[0, 1/2, 1/2],
 [1/2, 0, 1/2],
 [1/2, 1/2, 0]]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>print(format_array_table(array))
print(format_array_table(fraction_array))
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
 0.00000000  0.50000000  0.50000000
 0.50000000  0.00000000  0.50000000
 0.50000000  0.50000000  0.00000000
0 1/2 1/2
1/2 0 1/2
1/2 1/2 0
</pre></div></div>
</div>
<p>Here the <code class="docutils literal notranslate"><span class="pre">tex_array_formatter</span></code> function can return a formatter instance that uses the specified tex environment (default to “bmatrix”).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>tex_formatter = tex_array_formatter(texenv=&quot;bmatrix&quot;)
print(tex_formatter(array))
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
\begin{bmatrix}
   0.00000000 &amp;&amp;  0.50000000 &amp;&amp;  0.50000000 \\
   0.50000000 &amp;&amp;  0.00000000 &amp;&amp;  0.50000000 \\
   0.50000000 &amp;&amp;  0.50000000 &amp;&amp;  0.00000000 \\
\end{bmatrix}
</pre></div></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Marianetti Group.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>