<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; Principia Materia  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom_style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Software Conventions" href="conventions.html" />
    <link rel="prev" title="Welcome" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="contents.html" class="icon icon-home"> Principia Materia
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Welcome</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#obtaining-the-source-code">Obtaining the source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-a-virtual-environment">Using a Virtual Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-dependencies">Installing dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compiling-pm">Compiling PM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setup-shell-auto-complete">Setup Shell Auto-Complete</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="conventions.html">Software Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation/contents.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/contents.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="ci.html">Continuous Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_doc/principia_materia.html">API References</a></li>
<li class="toctree-l1"><a class="reference internal" href="report_issues.html">Reporting Issues</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="contents.html">Principia Materia</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="contents.html" class="icon icon-home"></a> &raquo;</li>
      <li>Installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/install.rst.txt" rel="nofollow"> View page source</a>
          <a href="https://github.com/marianettigroup/principia-materia" style="padding-top: 0px; padding-bottom: 0px;">
            <img class="gh-icon" src='_static/github.svg' alt="Visit the project on GitHub"/>
          </a>
      </li>
<!--
-->

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<span id="install"></span><span id="index-0"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline"></a></h1>
<p>principia-materia (PM) consists of Python codes with C++ and Fortran
extensions. There will soon be a variety of options for installing PM, but we
presently recommend cloning the git repository, creating a virtual environment,
installing the required dependencies, and compiling the source code.
We also provide the option of having auto-completion at the Bash shell using argcomplete.</p>
<section id="obtaining-the-source-code">
<h2>Obtaining the source code<a class="headerlink" href="#obtaining-the-source-code" title="Permalink to this headline"></a></h2>
<p>Clone the git repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone git@github.com:marianettigroup/principia-materia.git
</pre></div>
</div>
</section>
<section id="using-a-virtual-environment">
<h2>Using a Virtual Environment<a class="headerlink" href="#using-a-virtual-environment" title="Permalink to this headline"></a></h2>
<p>A virtual environment is recommended when working with PM.
To setup a virtual environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 -m virtualenv ENVNAME
</pre></div>
</div>
<p>(replace <code class="docutils literal notranslate"><span class="pre">ENVNAME</span></code> with the name you choose for the environment).</p>
<p>To launch the environment, issue the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> ENVNAME/bin/activate
</pre></div>
</div>
<p>This virtual environment will be launched whenever running PM.</p>
</section>
<section id="installing-dependencies">
<h2>Installing dependencies<a class="headerlink" href="#installing-dependencies" title="Permalink to this headline"></a></h2>
<p>The PM package depends on several external libraries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openmp</span><span class="p">,</span> <span class="n">lapack</span><span class="p">,</span> <span class="n">blas</span><span class="p">,</span> <span class="n">gcc</span><span class="p">,</span> <span class="n">gfortran</span>
</pre></div>
</div>
<ul>
<li><p>For Ubuntu 18.04 and later with gcc compilers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">gcc</span> <span class="n">gfortran</span> <span class="n">libopenblas</span><span class="o">-</span><span class="n">dev</span> <span class="n">libgomp1</span> <span class="n">libhdf5</span><span class="o">-</span><span class="n">dev</span>
</pre></div>
</div>
</li>
<li><p>For macOS with Homebrew:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">brew</span> <span class="n">install</span> <span class="n">gcc</span> <span class="n">openblas</span>
</pre></div>
</div>
</li>
</ul>
<p>Required python modules for the packge are listed in the file <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</section>
<section id="compiling-pm">
<h2>Compiling PM<a class="headerlink" href="#compiling-pm" title="Permalink to this headline"></a></h2>
<p>The final step is compiling the source code.</p>
<ul>
<li><p>For Ubuntu 18.04 and latear with gcc compilers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span>
</pre></div>
</div>
</li>
<li><p>For macOS with Homebrew:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CC</span><span class="o">=</span><span class="n">gcc</span><span class="o">-</span><span class="mi">11</span> <span class="n">CXX</span><span class="o">=</span><span class="n">g</span><span class="o">++-</span><span class="mi">11</span> <span class="n">F90</span><span class="o">=</span><span class="n">gfortran</span><span class="o">-</span><span class="mi">11</span> <span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">build</span>
</pre></div>
</div>
</li>
</ul>
<p>The installation step can be executed with either the regular mode</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
<p>or the <em>development</em> mode</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">develop</span>
</pre></div>
</div>
<p>with the latter offering more flexibility during development, where the
repository is dynamically link to serve as the python module so that any
changes to the code can come in effect without reinstalling the module. However
for the extensions of the module that is written in either C or FORTRAN, the
module requires recompilation to reflect any changes to the source code.
We currently recommend installing in the development mode, given that many
changes are still being made to the code.</p>
</section>
<section id="setup-shell-auto-complete">
<h2>Setup Shell Auto-Complete<a class="headerlink" href="#setup-shell-auto-complete" title="Permalink to this headline"></a></h2>
<p>The auto-complete feature is optional, and is realized with <a class="reference external" href="https://kislyuk.github.io/argcomplete">argcomplete</a> module.
To activate this feature, in Bash for example, install the moculde first:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install argcomplete
activate-global-python-argcomplete
</pre></div>
</div>
<p>then within the virtual environment source the <code class="docutils literal notranslate"><span class="pre">pm-completion.sh</span></code> script in activation script <code class="docutils literal notranslate"><span class="pre">ENVNAME/bin/activate</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> <span class="si">${</span><span class="nv">VIRTUAL_ENV</span><span class="si">}</span>/../pm-completion.sh
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="conventions.html" class="btn btn-neutral float-right" title="Software Conventions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Marianetti Group.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>