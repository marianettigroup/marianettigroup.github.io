<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.104.2"><link rel=canonical type=text/html href=https://marianettigroup.github.io/docs/><link rel=alternate type=application/rss+xml href=https://marianettigroup.github.io/docs/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Documentation | Principia Materia</title><meta name=description content="A documentation site for the PM code"><meta property="og:title" content="Documentation"><meta property="og:description" content="A documentation site for the PM code"><meta property="og:type" content="website"><meta property="og:url" content="https://marianettigroup.github.io/docs/"><meta property="og:site_name" content="Principia Materia"><meta itemprop=name content="Documentation"><meta itemprop=description content="A documentation site for the PM code"><meta name=twitter:card content="summary"><meta name=twitter:title content="Documentation"><meta name=twitter:description content="A documentation site for the PM code"><link rel=preload href=/scss/main.min.f212c84681f4bec51010b0c310734e389c3a4ee53c5c3d2f36e725bc271a46b3.css as=style><link href=/scss/main.min.f212c84681f4bec51010b0c310734e389c3a4ee53c5c3d2f36e725bc271a46b3.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<link rel=stylesheet href=/css/prism.css><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-00000000-0","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class=font-weight-bold>Principia Materia</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs/>Return to the regular view of this page</a>.</p></div><h1 class=title>Documentation</h1><ul><li>1: <a href=#pg-6557438925ac398717df86f494c6abb8>Overview</a></li><ul></ul><li>2: <a href=#pg-273a1d3f87830cbffaaf95a64d1ab7e6>Installation</a></li><ul></ul><li>3: <a href=#pg-fecdf057d1fa4c5e074135fcd9b66d33>Docsy Documentation</a></li><ul></ul><li>4: <a href=#pg-97f19c19572e4976430b36b7a68cbcbf>Command Line Functionality</a></li><ul><li>4.1: <a href=#pg-d056c17b39b909d9df9219c429baeaa5>Crystal Structure</a></li><li>4.2: <a href=#pg-381038f4fe96b9e57a300bfd52de5df4>Compute Irreducible Derivative</a></li><li>4.3: <a href=#pg-49da11994e29ecfc90a101746909debc>Phonon Linewidth and Thermal Conductivity</a></li><li>4.4: <a href=#pg-080d9e02802bd664b3f56b1f9e12c74d>Finite Translation Group</a></li></ul><li>5: <a href=#pg-188436dc90e1e3110a757e1b8e1b2abe>Data Management</a></li><ul><li>5.1: <a href=#pg-7c139c61a1c91f89d3a98de6c680e5ff>Data Wrapper</a></li></ul></ul><div class=content><p>Here we document all aspects of the code.</p></div></div><div class=td-content><h1 id=pg-6557438925ac398717df86f494c6abb8>1 - Overview</h1><div class=lead>PM allows one to compute various electronic and phononic properties of crystals.</div><p>This page could probably be the landing for Overview.</p><h2 id=what-is-it>What is it?</h2><p>PM can be used to compute phonons and their interactions via the lone irreducible derivative (LID)
and bundled irreducible derivative (BID) approaches, based on some first-principles method or
using empirical potentials.</p><p>Given some anharmonic vibrational Hamiltonian, perhaps computed using PM, one can
compute various vibrational observables, including phonon lineshifts and linewidths, thermal conductivity,
density of states, etc.</p><p>Given some real space electronic Hamiltonian, various electronic observables can be computed, including
density of states, magnetism within Hartree-Fock (assuming local interactions), etc.</p><h2 id=why-do-i-want-it>Why do I want it?</h2><p>Our BID algorithm for computing phonons and their interactions is the fastest finite displacement algorithm allowed by group theory.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-273a1d3f87830cbffaaf95a64d1ab7e6>2 - Installation</h1><div class=lead>How you can obtain and install PM.</div><p>Principia Materia (PM) consists of Python codes with C++ and Fortran
extensions. There will soon be a variety of options for installing PM, but we
presently recommend cloning the git repository, creating a virtual environment,
installing the required dependencies, and compiling the source code.
We also provide the option of having auto-completion at the Bash shell using argcomplete.</p><h2 id=obtaining-the-source-code>Obtaining the source code</h2><p>Clone the git repository:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>  git clone git@github.com:marianettigroup/principia-materia.git
</span></span></code></pre></div><h2 id=using-a-virtual-environment>Using a Virtual Environment</h2><p>A virtual environment is recommended when working with PM.
To setup a virtual environment:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>  python3 -m virtualenv ENVNAME 
</span></span></code></pre></div><p>(replace <code>ENVNAME</code> with the name you choose for the environment).</p><p>To launch the environment, issue the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>  <span style=color:#204a87>source</span> ENVNAME/bin/activate
</span></span></code></pre></div><p>This virtual environment will be launched whenever running PM.</p><h2 id=installing-dependencies>Installing dependencies</h2><p>PM depends on several external libraries:</p><pre><code>  openmp, lapack, blas, gcc, gfortran
</code></pre><ul><li>For Ubuntu 18.04 and later with gcc compilers</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>      sudo apt install gcc gfortran libopenblas-dev libgomp1 libhdf5-dev
</span></span></code></pre></div><ul><li>For macOS with Homebrew</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>      brew install gcc openblas
</span></span></code></pre></div><p>Required python modules for PM are listed in the file <code>requirements.txt</code></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>      pip install --upgrade -r requirements.txt
</span></span></code></pre></div><h2 id=compiling-pm>Compiling PM</h2><p>The final step is compiling the source code.</p><ul><li>For Ubuntu 18.04 and latear with gcc compilers::</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>      python setup.py build
</span></span></code></pre></div><ul><li>For macOS with Homebrew::</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>      <span style=color:#000>CC</span><span style=color:#ce5c00;font-weight:700>=</span>gcc-11 <span style=color:#000>CXX</span><span style=color:#ce5c00;font-weight:700>=</span>g++-11 <span style=color:#000>F90</span><span style=color:#ce5c00;font-weight:700>=</span>gfortran-11 python setup.py build
</span></span></code></pre></div><p>The installation step can be executed with either the regular mode:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>      python setup.py install
</span></span></code></pre></div><p>or the <em>development</em> mode:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>      python setup.py develop
</span></span></code></pre></div><p>In development mode, the
repository is dynamically link to serve as the python module so that any
changes to the code come into effect without reinstalling the module. However
for the extensions of the module that are written in either C or FORTRAN, the
module requires recompilation to reflect any changes to the source code.
We currently recommend installing in the development mode, given that many
changes are still being made to the code.</p><h2 id=setup-shell-auto-complete>Setup Shell Auto-Complete</h2><p>The auto-complete feature is optional, and is realized with
the <a href=https://kislyuk.github.io/argcomplete>argcomplete</a> module.
To activate this feature in Bash, for example, install the module first:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>   pip install argcomplete
</span></span><span style=display:flex><span>   activate-global-python-argcomplete
</span></span></code></pre></div><p>Then within the virtual environment, source the <code>pm-completion.sh</code> script in activation script <code>ENVNAME/bin/activate</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>  <span style=color:#204a87>source</span> <span style=color:#4e9a06>${</span><span style=color:#000>VIRTUAL_ENV</span><span style=color:#4e9a06>}</span>/../pm-completion.sh
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-fecdf057d1fa4c5e074135fcd9b66d33>3 - Docsy Documentation</h1><div class=lead>How to contribute to the documentation of PM.</div><p>The documentation for PM is generated using <a href=https://gohugo.io/>Hugo</a> with
the <a href=https://www.docsy.dev/>Docsy</a> theme. The main advangtage of Hugo is how
fast it is, and you can basically see your changes to the documentation in real
time when viewing the site on a local server. The Docsy theme brings all of the
advanced features that are needed for technical documentation, including
detailed support for code markup (via <a href=https://prismjs.com/>prism</a>), latex
support (via <a href=https://katex.org/>katex</a>), etc.</p><p>This documentation is stored in the github repository
<a href=https://github.com/marianettigroup/principia-materia-docsy>principia-materia-docsy</a>.
When you push to the github repository, the site will automatically be built using github actions and served at
<a href=https://marianettigroup.github.io/>https://marianettigroup.github.io/</a>. If you want to push to github without rebuilding,
include <code>[skip actions]</code> in your commit message.</p><p>To view the documentation locally, start by installing hugo; snap is probably the most convenient way:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo snap install hugo
</span></span></code></pre></div><p>Now change into the directory of your local pm-docsy repo, and start the hugo server:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hugo server 
</span></span></code></pre></div><p>You can then view the docs by pointing your browser to the local port that hugo prints out,
which is normally <a href=http://localhost:1313/>http://localhost:1313/</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-97f19c19572e4976430b36b7a68cbcbf>4 - Command Line Functionality</h1><div class=lead>Executing core functionality of PM from the command line.</div><p>Most key tasks can be performed from the command line, and here we document all such functionality.</p></div><div class=td-content><h1 id=pg-d056c17b39b909d9df9219c429baeaa5>4.1 - Crystal Structure</h1><div class=lead>Most computations require a crystal structure, and PM has a standard yaml file for doing so.</div><p>For many different tasks performed in the PM suite, a crystal structure, or
some component of a crystal structure, must be provided to the code. Most
likely, this will be done using a yaml input file, and the two required key words
are <strong>vec</strong> and <strong>atoms</strong>, which will contain the lattice vectors and the basis atoms, respectively.
Considering the flourite structure, the most straightforward yaml file would be:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># xtal.yml</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>vec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> 
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#000;font-weight:700>[[</span><span style=color:#0000cf;font-weight:700>0.000000</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>2.764309</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>2.764309</span><span style=color:#000;font-weight:700>],</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>2.764309</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>0.000000</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>2.764309</span><span style=color:#000;font-weight:700>],</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>2.764309</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>2.764309</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>0.000000</span><span style=color:#000;font-weight:700>]]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>atoms</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>Ca</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> 
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>     </span><span style=color:#000;font-weight:700>[[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>]]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>F</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>     </span><span style=color:#000;font-weight:700>[[</span><span style=color:#0000cf;font-weight:700>0.25</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>0.25</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>0.25</span><span style=color:#000;font-weight:700>],</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0.75</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>0.75</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>0.75</span><span style=color:#000;font-weight:700>]]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>The code will infer that there is one basis atom labeled <em>Ca</em> and two basis atoms labeled <em>F</em>.</p><p>When entering matrices, we will always run the input through our general array
parser (see parse_array if interested in the details). Therefore, there are many different
options for entering a matrix as a string. For example, consider the following two examples:</p><div class="td-card-deck card-deck mb-4"><div class="td-card card"><div class="card-header bg-white"><strong>xtal.yml</strong></div><div class="card-body code p-l0 m-0"><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scale</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>2.764309</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>vec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>   0 1 1
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>   1 0 1
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>   1 1 0</span><span style=color:#f8f8f8;text-decoration:underline>   
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>atoms</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>Ca</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>|  </span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>     </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>F</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>     1/4 1/4 1/4
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>     3/4 3/4 3/4</span><span style=color:#f8f8f8;text-decoration:underline>     
</span></span></span></code></pre></div></div></div><div class="td-card card"><div class="card-header bg-white"><strong>xtal.yml</strong></div><div class="card-body code p-l0 m-0"><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>scale</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>2.764309</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>vec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>; 1 0 1 ; 1 1 0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>atoms</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>Ca</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline> 
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>F</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000>/4 1/4 1/4 ; 3/4 3/4 3/4</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div></div></div></div><p>where <strong>scale</strong> is a constant that multiplies all lattice vectors (a list of
three constants could have been provided), and the vertical lines tells yaml to
expect a text block. Our parser has a hierarchy of delimiters, ranging from
space, comma, semicolon, newline. In the above example, we have two types of
delimiters (i.e. spaces and newlines), which tells the code to form a matrix.</p><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4><h3 id=potential-errors-in-yaml-input>Potential Errors in yaml input</h3><p>In the case of syntax error in YAML file, a <code>RuntimeError</code> will be thrown indicating the an error has
occurred during the YAML loading process. For example, with the following text as YAML input:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>scale</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>2.764309</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>vec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>   </span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>; 1 0 1 ; 1 1 0</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>atoms</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>Ca</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>|  </span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8;text-decoration:underline>  
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>F</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>|  </span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000>/4 1/4 1/4 ; 3/4 3/4 3/4</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>The following error message will appear:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#c00;font-weight:700>RuntimeError</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>Following</span> <span style=color:#000>error</span> <span style=color:#000>occured</span> <span style=color:#000>processing</span> <span style=color:#204a87>input</span> <span style=color:#000>YAML</span> <span style=color:#000>string</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#000>ScannerError</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>while</span> <span style=color:#000>scanning</span> <span style=color:#000>a</span> <span style=color:#000>simple</span> <span style=color:#000>key</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>in</span> <span style=color:#4e9a06>&#34;&lt;unicode string&gt;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>line</span> <span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>column</span> <span style=color:#0000cf;font-weight:700>5</span>
</span></span><span style=display:flex><span>    <span style=color:#000>could</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000>find</span> <span style=color:#000>expected</span> <span style=color:#4e9a06>&#39;:&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>in</span> <span style=color:#4e9a06>&#34;&lt;unicode string&gt;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>line</span> <span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>column</span> <span style=color:#0000cf;font-weight:700>3</span>
</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-381038f4fe96b9e57a300bfd52de5df4>4.2 - Compute Irreducible Derivative</h1><div class=lead>Describes how to compute irreducible derivatives for a xtal using LID or BID.</div><p>Within this package we can compute irreducible derivatives of phonons and phonon interactions at a given order with either LID or BID approach.
The theory behind these approaches are described in the following paper:</p><ul><li><a href=https://doi.org/10.1103/PhysRevB.100.014303>L. Fu, M. Kornbluth, Z. Cheng, and C. A. Marianetti, Phys. Rev. B 100, 014303 (2019)</a>.</li></ul><p>Specifically, we can execute the LID, SS-BID and HS-BID approaches from the command line using the following commands:</p><ol><li><p><code>pm-lid-mesh</code>: compute irreducible derivatives of a given FTG and order using LID method;</p></li><li><p><code>pm-bid</code>: compute irreducible derivatives of a given FTG and order using SS-BID method;</p></li><li><p><code>pm-hsbid</code>: compute irreducible derivatives of a given FTG and order using HD-BID method.</p></li></ol><p>These commands take in generally the same command line options, therefore one can switch between approaches by changing the command while keeping
the options the same.
For example, below is guide on using the LID approach to compute irreducible derivatives of NaCl at second order but one can replace <code>pm-lid-mesh</code>
with <code>pm-bid</code> or <code>pm-hsbid</code> to execute SS-BID or HS-BID approach.</p><h2 id=lid-approach-on-nacl-at-second-order>LID Approach on NaCl at Second Order</h2><p>There are many ways to use this package to execute calculations of the irreducible derivatives with LID approach.
Here we demonstrate a recommended workflow to execute our LID approach at second order on NaCl from forces computed by first principle method.</p><h3 id=symmetry-analysis-and-find-the-measurements-to-compute>Symmetry Analysis and Find the Measurements to Compute</h3><p>First we create a file <code>xtal.yml</code> describing the structure of NaCl:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># xtal.yml</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>vec</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#000;font-weight:700>[[</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0.00000000</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#0000cf;font-weight:700>2.83000729</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#0000cf;font-weight:700>2.83000729</span><span style=color:#000;font-weight:700>],</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>2.83000729</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#0000cf;font-weight:700>0.00000000</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#0000cf;font-weight:700>2.83000729</span><span style=color:#000;font-weight:700>],</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>   </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>2.83000729</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#0000cf;font-weight:700>2.83000729</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#0000cf;font-weight:700>0.00000000</span><span style=color:#000;font-weight:700>]]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>atoms</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>Na</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> 
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#000;font-weight:700>[[</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0.00000000</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#0000cf;font-weight:700>0.00000000</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#0000cf;font-weight:700>0.00000000</span><span style=color:#000;font-weight:700>]]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#204a87;font-weight:700>Cl</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> 
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>      </span><span style=color:#000;font-weight:700>[[</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0.50000000</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#0000cf;font-weight:700>0.50000000</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#0000cf;font-weight:700>0.50000000</span><span style=color:#000;font-weight:700>]]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Then, with this structure and the point group \(O_h\), we can write the minimal configuration file, named <code>config.yml</code>, to execute the LID approach with a supercell \(\hat{S}_{BZ}=2\hat1\):</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># config.yml</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>structure</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;xtal.yml&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>supa</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>|</span><span style=color:#8f5902;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>  2 0 0
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>  0 2 0
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>  0 0 2</span><span style=color:#f8f8f8;text-decoration:underline>  
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>pg</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;Oh&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>  </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>full_symmetry</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>True</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>delta</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0.02</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0.03</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>0.04</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>There are numerous parameters which have default settings that can be changed, and these can be
added to the config.yml file listed above:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>fdtype</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;c&#39;</span><span style=color:#f8f8f8;text-decoration:underline>                  
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>root_directory</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;.&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>database</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;database.db&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>db_type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;sqlite&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>db_table</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;lid_phonon&#39;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>With the configuration file we can initiate the pre-processing step which will execute the symmetry analysis and create the jobs that need to be computed with
first principles:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pm-lid-mesh --config config.yml --create --save-lid-mesh
</span></span></code></pre></div><p>The above step will create two files:</p><ul><li><p><code>lid_mesh.hdf5</code>: A HDF5 file containing the computed symmetry analysis results, which will be used in the post-processing step to compute the irreducible derivatives
after first principle calculations are finished.</p></li><li><p><code>database.db</code>: A SQLite database file containing the jobs need to be computed with first principle calculations (<code>db_type</code> is specified to be &lsquo;sqlite&rsquo; in the <code>config.yml</code> file,
other database can be used if a working interface is provided).</p></li></ul><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4><p>The above steps can also be executed purely in command line with the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>      pm-lid-mesh --save-config --create --save-lid-mesh --structure xtal.yml <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>        --supa <span style=color:#4e9a06>&#39;2,0,0;0,2,0;0,0,2&#39;</span> --pg Oh --order <span style=color:#0000cf;font-weight:700>2</span> --full-symmetry <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>        --delta 0.02,0.03,0.04 --fdtype c --database database.db <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>        --db-type sqlite --db-table lid_phonon
</span></span></code></pre></div></div><h3 id=prepare-and-execute-first-principle-calculations>Prepare and Execute First Principle Calculations</h3><p>The next step is to create the first principle jobs to be computed, the package generically supports all types of first principle compute engines provided a working interface,
and here we demonstrate using VASP. We begin by create the VASP jobs to be executed:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>  pm-jobs --config config.yml --create --engine vasp --save-config jobs_config.yml <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --job-config-path path-to-vasp-input-templates --root-directory jobs-ro-run
</span></span></code></pre></div><p>Inside the <code>path-to-vasp-input-templates</code> directory, one usually needs to provide &ldquo;INCAR&rdquo;, &ldquo;KPOINTS&rdquo; and &ldquo;POTCAR&rdquo; files and they will be used as templates when creating the
vasp jobs, each vasp job will be created in a separate directory for convenience. Once these directories are created, VASP can be executed within each directory.
Afterwards, the calculation results can be collected and stored in the database:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>  pm-jobs --config jobs_config.yml --retrieve
</span></span></code></pre></div><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>We initiated the <code>pm-jobs</code> command with the input configuration file for the LID analysis <code>config.yml</code>,
and subsequently saved a new configuration file <code>jobs_config.yml</code> for the <code>pm-jobs</code> code for the purpose of convenience.
These configuration files contains all the input arguments that are required to reproduce the exact same setup.</div><h3 id=compute-irreducible-derivatives-from-the-results-of-first-principle-calculations>Compute Irreducible Derivatives from the Results of First Principle Calculations</h3><p>Finally, we can execute the post-processing step of the LID approach to compute the irreducible derivatives and, for example, compute the force constants tensors for Fourier interpolation:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>  pm-lid-mesh --load-lid-mesh lid_mesh.hdf5 --config config.yml <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --post --save-fi --save-ids --save-dts
</span></span></code></pre></div><p>If the material of interest is an insulator and the dipole-dipole interaction needs to be considered,
the dataset for computing the dipole-dipole interaction needs to be provided as an input as well:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>  pm-lid-mesh --load-lid-mesh lid_mesh.hdf5 --config config.yml --epsilon path-to-epsilon.yml <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --post --save-fi --save-ids --save-dts
</span></span></code></pre></div><p>The dataset for computing the dipole-dipole interaction can be computed from first principle methods.
Continuing with the VASP example, we can obtain the dataset by executing a static calculation adding <code>LEPSILON=.TRUE.</code> to the &ldquo;ICNAR&rdquo; file.
Once the calculation is finished, use the following command inside the calculation directory to parse the output from VASP and create the <code>epsilon.yml</code> file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>  pm-epsilon --vasp -o epsilon.yml .
</span></span></code></pre></div><p>then replace <code>path-to-epsilon.yml</code> with the path to the generated <code>epsilon.yml</code> file.</p><p>The following files are created in this step:</p><ul><li><p><code>irreducible_derivatives.hdf5</code>: A HDF5 files containing the names of the irreducible derivatives and their values.</p></li><li><p><code>fourier_interpolation.hdf5</code>: A HDF5 files containing all the necessary information (structure, force constants tensors, FTG and dipole-dipole contributions if at second order)
to compute Fourier interpolation.</p></li><li><p><code>dynamic_tensors.hdf5</code>: A HDF5 files containing all the dynamic tensors in the naive basis within irreducible Q.</p></li></ul><div class="alert alert-warning" role=alert><h4 class=alert-heading>Note</h4>Both <strong>BID</strong> and <strong>HS-BID</strong> approaches can be executed following the exact same workflow while replacing the command <code>pm-lid-mesh</code>
with <code>pm-bid</code> and <code>pm-hsbid</code> respectively, and a change of the table name for the database is also recommended (e.g. change to &lsquo;bid_phonon&rsquo;).</div><h2 id=computing-and-analyzing-error-tails>Computing and analyzing error tails</h2><p>The results of any finite displacement approach are only reliable if the
discretization error has been properly controlled. Forward and backward finite
difference guarantee a linear error tail, while central finite difference
guarantees a quadratic error tail. Resolving the error tail is a sure sign that
the discretization error has been properly extrapolated to zero. For phonons,
we will be taking either the first derivatives of the forces or the second
derivatives of the energy, which are typically not sensitive. Therefore, it is
common practice to use a single finite displacement (i.e. a single <em>delta</em>),
and then there is nothing to analyze. However, there are plenty of situations
where one does find sensitive results, such as metallic systems with Fermi
surface nesting or even band insulators when using the SCAN functional. If one
computes three or more deltas, then the error tail can be scrutinized to judge
the quality of the result.</p><p>To examine the error tails, the corresponding data must be output during the post-processing
of results. The above lid-mesh commands needs the <em>&ndash;err-output</em> flag as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>  pm-lid-mesh --load-lid-mesh lid_mesh.hdf5 --config config.yml <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --post --save-fi --save-ids --save-dts --err-output error_tails.hdf5
</span></span></code></pre></div><p>The next step is extract the results from the hdf5 file and output them to individual
yaml files:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pm-convert-errortail error_tails.hdf5
</span></span></code></pre></div><p>The yaml files can then be plotted to PDF files. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pm-plot-errortail 1_0_errortail.yml --iscomplex --output 1_0_errortail.pdf
</span></span></code></pre></div><p>At present, one can execute a loop in bash over all the files:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87;font-weight:700>for</span> i in *_errortail.yml<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>do</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87>echo</span> <span style=color:#000>$i</span>
</span></span><span style=display:flex><span>  pm-plot-errortail <span style=color:#000>$i</span> --iscomplex --output <span style=color:#204a87;font-weight:700>$(</span>basename <span style=color:#000>$i</span> .yml<span style=color:#204a87;font-weight:700>)</span>.pdf
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>done</span>
</span></span></code></pre></div><h2 id=computing-phonon-dispersion-and-dos>Computing phonon dispersion and DOS</h2><p>With the <code>fourier_interpolation.hdf5</code> file obtained at second order, we can compute phonon dispersion and density of states (DOS).</p><p>Let&rsquo;s continue the NaCl example and first prepare the configuration file <code>phonon_config.yml</code> for computing the phonon dispersion and DOS:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># phonon_config.yml</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>band</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;0 0 0&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;1/2 1/2 0&#39;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;-1/2 1/2 0&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;0 0 0&#39;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;0 0 0&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;1/2 1/2 1/2&#39;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>band_label</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>$\Gamma$</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>X</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>$\Gamma$</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>L</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>mesh</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>20</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>20</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>20</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Then we can execute the following command to compute the band structure and DOS:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>  pm-phonon-band-dos --load-fi fourier_interpolation.hdf5 --config phonon_config.yml <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span>    --save-band --save-grid --save-dos --save-plot
</span></span></code></pre></div><p>The following files are created in this step:</p><ul><li><p><code>band_plot_config.yml</code>: A YAML file with the configuration the plot the band structure and DOS;</p></li><li><p><code>bands.dat</code>: A text file with the phonon band structure data computed with Fourier interpolation;</p></li><li><p><code>grid_phonons.dat</code>: A text file with the data of the phonons that are measured at the FTG that fall on the path in the plot;</p></li><li><p><code>dos.dat</code>: A text file with the data of phonon DOS.</p></li></ul><p>We can plot the phonon band structure and DOS with the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>  pm-plot-band -s band_plot_config.yml
</span></span></code></pre></div><figure><img src=/figures/examples/nacl/nacl_phonon_band_dos.png><figcaption><h4>Phonon bands and DOS of NaCl</h4></figcaption></figure></div><div class=td-content style=page-break-before:always><h1 id=pg-49da11994e29ecfc90a101746909debc>4.3 - Phonon Linewidth and Thermal Conductivity</h1><div class=lead>Using second and third order irreducible derivatives to compute the phonon linewidth and thermal conductivity.</div><p>Second and third order irreducible derivatives must be computed first, as described <a href=../compute-id>here</a>,
and the second and third order force constants may then be used
to predict the phonon linewidth using perturbation theory. The phonons and the linewidths can then be used
to computed thermal conductivity with the relaxation time approximation.</p><h2 id=phonon-linewidth>Phonon Linewidth</h2><p>Here we continue the NaCl example from <a href=../compute-id>before</a>.</p><p>First, we need to prepare a configuration file <code>config.yml</code> for the <code>pm-conductivity</code> command:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#  config.yml</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>structure</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>xtal.yml</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>load_fi2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>fi_order2.hdf5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>load_fi3</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>fi_order3.hdf5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>mesh</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>11</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>11</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>11</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>band</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;0 0 0&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;1/2 1/2 0&#39;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;-1/2 1/2 0&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;0 0 0&#39;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;0 0 0&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#4e9a06>&#39;1/2 1/2 1/2&#39;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>band_label</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>$\Gamma$</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>X</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>$\Gamma$</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline>  </span>- <span style=color:#000>L</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>where:</p><ul><li><p><code>xtal.yml</code> contains structure of NaCl;</p></li><li><p><code>fi_order2.hdf5</code> is the HDF5 data file for the FourierInterpolation class at second order, which contains the 2nd order force constants;</p></li><li><p><code>fi_order3.hdf5</code> is the HDF5 data file for the FourierInterpolation class at third order, which contains the 3rd order force constants.</p></li></ul><p>In this example, we use the FourierInterpolation object of a
\(\hat{S}_{BZ}=4\hat{\mathbf{1}}\)
FTG (i.e. a \(4 \times 4 \times 4\) supercell)
at second order and the FourierInterpolation object of a
\(\hat{S} _{BZ}=2\hat{\mathbf{1}}\)
FTG
(i.e. a \(2 \times 2 \times 2\) supercell) at third order. We
interpolate the phonons and phonon interactions to the mesh of
\(11\hat{\mathbf{1}}\), and compute the
linewidth along the K-path \(\Gamma \to X \to \Gamma \to L\).</p><p>Execute the following command the compute the phonon linewidth:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pm-conductivity --config config.yml --save-gamma
</span></span></code></pre></div><h2 id=thermal-conductivity>Thermal Conductivity</h2><p>Using the same NaCl example, we can prepare a configuration file <code>config.yml</code> similar to the one above:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># config.yml</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>structure</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>xtal.yml</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>load_fi2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>fi_order2.hdf5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>load_fi3</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>fi_order3.hdf5</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>mesh</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>11</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>11</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#0000cf;font-weight:700>11</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Execute the following command the compute the thermal conductivity using relaxation time approximation (RTA):</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pm-conductivity --config config.yml --save-kappa --mode RTA
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-080d9e02802bd664b3f56b1f9e12c74d>4.4 - Finite Translation Group</h1><div class=lead>Finding all translation points within a given supercell, or all the k-points commensurate with a given supercell. Additionally, we will need to find the smallest supercell that will accomodate a given set of \(\bm q\)-points.</div><p>When performing calculations, we need to use various properties of a finite translation group (FTG), and the FTG
is naturally characterized by a supercell. For clarity, we have a class for the infinite translation group
which stores and computes basic data, and the
class for finite translation groups derives from this.</p><h2 id=translation-group>Translation Group</h2><p>Here introduce the basic functionality of the <code>Lattice</code> class using the
face center cubic as a demonstration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>numpy</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>np</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>principia_materia.translation_group</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>Lattice</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>lattice_vectors</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>np</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>array</span><span style=color:#000;font-weight:700>([</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0.0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0.5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0.5</span><span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0.5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0.0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0.5</span><span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0.5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0.5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0.0</span><span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>])</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>lattice</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Lattice</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>vec</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>lattice_vectors</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>lattice</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>vec</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[[</span><span style=color:#0000cf;font-weight:700>0.</span>  <span style=color:#0000cf;font-weight:700>0.5</span> <span style=color:#0000cf;font-weight:700>0.5</span><span style=color:#000;font-weight:700>]</span>    <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0.5</span> <span style=color:#0000cf;font-weight:700>0.</span>  <span style=color:#0000cf;font-weight:700>0.5</span><span style=color:#000;font-weight:700>]</span>    <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0.5</span> <span style=color:#0000cf;font-weight:700>0.5</span> <span style=color:#0000cf;font-weight:700>0.</span> <span style=color:#000;font-weight:700>]]</span>   <span style=color:#8f5902;font-style:italic># output</span>
</span></span></code></pre></div><p>With the above Lattice class object, we can compute various properties of the lattice.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;volume:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>lattice</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>vol</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>volume</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0.25</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;lengths of the lattice vectors:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>lattice</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>abc</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>lengths</span> <span style=color:#000>of</span> <span style=color:#000>the</span> <span style=color:#000>lattice</span> <span style=color:#000>vectors</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0.70710678</span> <span style=color:#0000cf;font-weight:700>0.70710678</span> <span style=color:#0000cf;font-weight:700>0.70710678</span><span style=color:#000;font-weight:700>]</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;angles between the lattice vectors:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>lattice</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>abg</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>angles</span> <span style=color:#000>between</span> <span style=color:#000>the</span> <span style=color:#000>lattice</span> <span style=color:#000>vectors</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>60.</span> <span style=color:#0000cf;font-weight:700>60.</span> <span style=color:#0000cf;font-weight:700>60.</span><span style=color:#000;font-weight:700>]</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span></code></pre></div><p>There is a reciprocal lattice associated with the lattice, which is also constructed in this class,
and we follow the convention \(\bm a_i\cdot \bm b_j =2\pi \delta_{ij} \), where
\(\bm a_i\) is a real space vector and \(\bm b_j\) is a reciprocal space vector.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>lattice</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>rvec</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[[</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#0000cf;font-weight:700>6.28318531</span>  <span style=color:#0000cf;font-weight:700>6.28318531</span>  <span style=color:#0000cf;font-weight:700>6.28318531</span><span style=color:#000;font-weight:700>]</span>   <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span> <span style=color:#000;font-weight:700>[</span> <span style=color:#0000cf;font-weight:700>6.28318531</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#0000cf;font-weight:700>6.28318531</span>  <span style=color:#0000cf;font-weight:700>6.28318531</span><span style=color:#000;font-weight:700>]</span>   <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span> <span style=color:#000;font-weight:700>[</span> <span style=color:#0000cf;font-weight:700>6.28318531</span>  <span style=color:#0000cf;font-weight:700>6.28318531</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#0000cf;font-weight:700>6.28318531</span><span style=color:#000;font-weight:700>]]</span>  <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;volume of reciprocal lattice:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>lattice</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>rvol</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>volume</span> <span style=color:#000>of</span> <span style=color:#000>reciprocal</span> <span style=color:#000>lattice</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>992.200854</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;lengths of the reciprocal lattice vectors:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>lattice</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>rabc</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>lengths</span> <span style=color:#000>of</span> <span style=color:#000>the</span> <span style=color:#000>reciprocal</span> <span style=color:#000>lattice</span> <span style=color:#000>vectors</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>10.88279619</span> <span style=color:#0000cf;font-weight:700>10.88279619</span> <span style=color:#0000cf;font-weight:700>10.88279619</span><span style=color:#000;font-weight:700>]</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;angles between the reciprocal lattice vectors:&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>lattice</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>rabg</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>angles</span> <span style=color:#000>between</span> <span style=color:#000>the</span> <span style=color:#000>reciprocal</span> <span style=color:#000>lattice</span> <span style=color:#000>vectors</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>109.47122063</span> <span style=color:#0000cf;font-weight:700>109.47122063</span> <span style=color:#0000cf;font-weight:700>109.47122063</span><span style=color:#000;font-weight:700>]</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span></code></pre></div><p>Additionally, the Lattice class allows us to perform various operation to a lattice, for example applying an axial strain:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>strain</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0.02</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>]</span> <span style=color:#8f5902;font-style:italic># axial strain along x</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>example_lattice</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>lattice</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>copy</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>example_lattice</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>axial_strain</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>strain</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>example_lattice</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>vec</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[[</span><span style=color:#0000cf;font-weight:700>0.</span>   <span style=color:#0000cf;font-weight:700>0.5</span>  <span style=color:#0000cf;font-weight:700>0.5</span> <span style=color:#000;font-weight:700>]</span>  <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0.51</span> <span style=color:#0000cf;font-weight:700>0.</span>   <span style=color:#0000cf;font-weight:700>0.5</span> <span style=color:#000;font-weight:700>]</span>  <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0.51</span> <span style=color:#0000cf;font-weight:700>0.5</span>  <span style=color:#0000cf;font-weight:700>0.</span>  <span style=color:#000;font-weight:700>]]</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span></code></pre></div><h2 id=finite-translation-group>Finite Translation Group</h2><p>Although diagonal matrices are most commonly used as supercell matrices,
non-diagonal supercells are crucial in the lattice dynamic analysis of crystals.
Phonons and their interactions can be extracted in the smallest non-diagonal supercells
that accommodate the irreducible derivatives (see <code>paper</code>_ for details).
Therefore, a robust algorithm is required to find the translation vectors of a given
supercell matrix, as well as indexing the vectors with the supercell.</p><p>The details of the algorithm to find translation vectors of any given supercell is explained in the Appendix of
<a href=https://doi.org/10.1103/PhysRevB.100.014303>PRB 100 014303</a>.
The same algorithm can be reversed to compute the indices of the lattice points at \(\mathcal{O}(1)\) time complexity
without searching through the list of all translation vectors.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>non_diagonal_supa</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>np</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>ones</span><span style=color:#000;font-weight:700>((</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>dtype</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-</span> <span style=color:#0000cf;font-weight:700>2</span> <span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>np</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>identity</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>dtype</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>int</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>lattice_ftg</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>LatticeFTG</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>np</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>identity</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>non_diagonal_supa</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>lattice_ftg</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>lattice_points</span>
</span></span><span style=display:flex><span><span style=color:#000>array</span><span style=color:#000;font-weight:700>([[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>],</span>  <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>],</span>  <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>],</span>  <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>]])</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>lattice_ftg</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get_index</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>lattice_ftg</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>lattice_points</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>array</span><span style=color:#000;font-weight:700>([</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>])</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span></code></pre></div><h3 id=algorithm-to-find-the-minimum-supercell-for-a-given-list-of-textbfq-points>Algorithm to find the minimum supercell for a given list of \(\textbf{q}\)-points</h3><p>The minimum supercell multiplicity is derived in the paper.
Here using the implemented function, we find that for the \(\textbf{q}\)-point
\(\textbf{q}=\left(\frac{1}{4}, \frac{3}{4}, 0\right)\) the supercell of the minimum multiplicity is:</p><p>$$
\hat{S}_{\textbf{q}} =
\begin{bmatrix}
1 & 1 & 0 \\
0 & 4 & 0 \\
0 & 0 & 1
\end{bmatrix}
$$</p><p>, and for the \(Q\)-point
\(Q=\left[\left(\frac{1}{4}, \frac{3}{4}, 0\right), \left(\frac{1}{4}, \frac{1}{2}, 0\right), \left(\frac{3}{4}, \frac{1}{4}, \frac{1}{2}\right)\right]\)
the supercell of the minimum multiplicity is:</p><p>$$
\hat{S}_{Q} = \begin{bmatrix}
4 & 0 & 0 \\
0 & 4 & 0 \\
0 & 0 & 2
\end{bmatrix}
$$</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>Qpoint</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>parse_array</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;&#34;&#34;</span><span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span><span style=color:#4e9a06>        1/4 3/4 0
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;&#34;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>dtype</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>Qpoint</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)]</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>get_minimum_supercell</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Qpoint</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>array</span><span style=color:#000;font-weight:700>([[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>],</span>  <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>],</span>  <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>]])</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>Qpoint</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>parse_array</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;&#34;&#34;</span><span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span><span style=color:#4e9a06></span><span style=color:#4e9a06>        1/4 3/4 0
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        1/4 1/2 0
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        3/4 1/4 1/2
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;&#34;&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>dtype</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>Qpoint</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>[[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)],</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span> <span style=color:#000;font-weight:700>[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)],</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span> <span style=color:#000;font-weight:700>[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>)]]</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>get_minimum_supercell</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Qpoint</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#000>array</span><span style=color:#000;font-weight:700>([[</span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>],</span>  <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>],</span>  <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>]])</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span></code></pre></div><h3 id=q-points-at-a-given-order-and-ftg>\(Q\)-points at a given order and FTG</h3><p>Phonon interactions are associated with \(Q\)-points at the order of the interaction.
We implemented an efficient algorithm to find symmetrically irreducible Q-points in a given FTG and order,
that considers both the point symmetry and the permutation symmetry of the interaction.</p><p>Here we continue with the NaCl example.
The first step is to find the irreducible \(\textbf{q}\)-points.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>lattice_vectors</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>np</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>array</span><span style=color:#000;font-weight:700>([</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0.0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0.5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0.5</span><span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0.5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0.0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0.5</span><span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0.5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0.5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0.0</span><span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>])</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>supa</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>np</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>identity</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>crystal</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>dim</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>dtype</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#0000cf;font-weight:700>4</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>pg</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Oh&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>qpoints</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>Kpoints</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>vec</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>lattice_vectors</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>supa</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>supa</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>pg</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>pg</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>qpoints</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>find_irreducible_lattice_points</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>qpoints</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>irreducible_kpoints</span>
</span></span><span style=display:flex><span><span style=color:#000>array</span><span style=color:#000;font-weight:700>([[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)],</span>                 <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)],</span>                 <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)],</span>                 <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)],</span>                 <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)],</span>                 <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)],</span>                 <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)],</span>                 <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>)]],</span> <span style=color:#000>dtype</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>object</span><span style=color:#000;font-weight:700>)</span>  <span style=color:#8f5902;font-style:italic># output</span>
</span></span></code></pre></div><p>At the same time we can construct
the list of point group operations that transform a k-point in FTG to its irreducible counterpart,
and the indices of irreducible k-point each k-point can be rotated into.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>qpoints</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>irreducible_kpoints_trans</span>
</span></span><span style=display:flex><span><span style=color:#000>array</span><span style=color:#000;font-weight:700>([</span><span style=color:#4e9a06>&#39;E&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;E&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;E&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;I&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2b&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;E&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;E&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;E&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2b&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2b&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;E&#39;</span><span style=color:#000;font-weight:700>,</span>  <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#4e9a06>&#39;Ic2z&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2z&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;I&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;I&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;I&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2d&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2f&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2f&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2f&#39;</span><span style=color:#000;font-weight:700>,</span>   <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#4e9a06>&#39;Ic2d&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2x&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic3ga&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic3ga&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ici4y&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2e&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2x&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;E&#39;</span><span style=color:#000;font-weight:700>,</span>  <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#4e9a06>&#39;Ic3be&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ici3al&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2b&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic4z&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2d&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic4x&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2e&#39;</span><span style=color:#000;font-weight:700>,</span>       <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#4e9a06>&#39;Ici3de&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2d&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2y&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ici3be&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2f&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2c&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic3al&#39;</span><span style=color:#000;font-weight:700>,</span>     <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#4e9a06>&#39;Ic2e&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic4y&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic3be&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2e&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2e&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2x&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2y&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic4x&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#4e9a06>&#39;Ici3ga&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2e&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2d&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2y&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2a&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ici4x&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic3de&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;I&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#4e9a06>&#39;Ici4z&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ici3be&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2c&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2c&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2c&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;Ic2e&#39;</span><span style=color:#000;font-weight:700>],</span> <span style=color:#000>dtype</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;&lt;U7&#39;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>qpoints</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>irreducible_kpoints_map</span>
</span></span><span style=display:flex><span><span style=color:#000>array</span><span style=color:#000;font-weight:700>([</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>])</span>      <span style=color:#8f5902;font-style:italic># output</span>
</span></span></code></pre></div><p>Next, we can use the above information to find irreducible \(Q\)-points.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>qpointsn</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>QpointsN</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>vec</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>lattice_vectors</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>supa</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>supa</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>order</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>pg</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>pg</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>qpointsn</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>find_irreducible_Qpoints</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span><span style=color:#000>array</span><span style=color:#000;font-weight:700>([[[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)],</span>                 <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)],</span>                 <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)]],</span>                <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>        <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#000;font-weight:700>,</span>                                                              <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>       <span style=color:#000;font-weight:700>[[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>)],</span>                 <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>)],</span>                 <span style=color:#8f5902;font-style:italic># output</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>[</span><span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000>Fraction</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)]]],</span> <span style=color:#000>dtype</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>object</span><span style=color:#000;font-weight:700>)</span> <span style=color:#8f5902;font-style:italic># output</span>
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-188436dc90e1e3110a757e1b8e1b2abe>5 - Data Management</h1><div class=lead>How PM handles data that it intakes and generates.</div><p>PM deals with varied data sets, some of which is read in from other sources and some of which is generated.</p></div><div class=td-content><h1 id=pg-7c139c61a1c91f89d3a98de6c680e5ff>5.1 - Data Wrapper</h1><div class=lead>PM uses DataWrapper for enforcing the type of input data and the convention for output data.</div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="User mailing list" aria-label="User mailing list"><a class=text-white target=_blank rel=noopener href=https://example.org/mail aria-label="User mailing list"><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://example.org/twitter aria-label=Twitter><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://example.org/stack aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/google/docsy aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://example.org/slack aria-label=Slack><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://example.org/mail aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 The Docsy Authors All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></small><p class=mt-2><a href=/about/>About Principia Materia</a></p></div></div></div></footer></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity="sha512-vJqxkZ+Sugf/6WRlpcxN01qVfX/29hF6qc33eHF1va3NgoV+U+wCi+uTAsQ10sDoGyBxHLdaHvGwDlV3yVYboA==" crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity="sha512-5ufNcHqOYgilGEHPfuRIQ5B/vDS1M8+UC+DESZ5CwVgGTg+b2Ol/15rYL/GiCWJ/Sx8oVo0FPFok1dPk8U9INQ==" crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity='sha512-ZA/RPrAo88DlwRnnoNVqKINnQNcWERzRK03PDaA4GIJiVZvGFIWQbdWCsUebMZfkWohnfngsDjXzU6PokO4jGw==' crossorigin=anonymous onload=renderMathInElement(document.body,null)></script>
<script src=/js/main.min.08996dc6298debf30304240ab6e8a154dace53a39f6fed06bc6aed92483d38e8.js integrity="sha256-CJltximN6/MDBCQKtuihVNrOU6Ofb+0GvGrtkkg9OOg=" crossorigin=anonymous></script>
<script src=/js/prism.js></script>
<script src=/js/tabpane-persist.js></script></body></html>